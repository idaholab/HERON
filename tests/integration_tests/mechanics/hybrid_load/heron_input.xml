<?xml version="1.0" ?>
<HERON>
  <TestInfo>
    <name>Cashflows</name>
    <author>talbpaul</author>
    <created>2020-10-16</created>
    <description>
      Tests various kinds of cashflows
    </description>
    <classesTested>HERON</classesTested>
  </TestInfo>

  <Case name="Runs">
    <mode>sweep</mode>
    <num_arma_samples>3</num_arma_samples>
    <time_discretization>
      <time_variable>Time</time_variable>
      <end_time>2</end_time>
      <num_steps>21</num_steps>
    </time_discretization>
    <economics>
      <ProjectTime>30</ProjectTime>
      <DiscountRate>0.08</DiscountRate>
      <tax>0.0</tax>
      <inflation>0.03</inflation>
      <verbosity>50</verbosity>
    </economics>
    <dispatcher>
      <pyomo/>
    </dispatcher>
  </Case>

  <Components>
    <Component name="source">
      <produces dispatch="fixed" resource="a">
        <capacity resource="a">
          <sweep_values>1, 2</sweep_values>
        </capacity>
      </produces>
      <economics>
        <!--This 'economics' subnode is created using information from the HYBRID simulations-->
        <lifetime>
          20
          <!--years-->
        </lifetime>
        <CashFlow inflation="none" mult_target="FALSE" name="capex" taxable="TRUE" type="one-time">
          <!--Warning: The value of 'capex_inflation' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'capex_multi_target' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'capex_name' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'capex_taxable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'capex_type' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <depreciate>
            15
            <!--years-->
          </depreciate>
          <reference_price>
            <!--Reference is INL/EXT-19-55395-->
            <fixed_value>545263737</fixed_value>
          </reference_price>
          <reference_driver>
            <!--kg/s of Hydrogen-->
            <fixed_value>7.4</fixed_value>
          </reference_driver>
          <scaling_factor_x>
            <fixed_value>0.955</fixed_value>
          </scaling_factor_x>
          <driver>
            <!--Warning: The value of 'capex_variable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
            <variable>source_capacity</variable>
          </driver>
        </CashFlow>
        <CashFlow inflation="none" mult_target="FALSE" name="FOM" taxable="TRUE" type="repeating">
          <!--Warning: The value of 'FOM_inflation' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'FOM_multi_target' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'FOM_name' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'FOM_taxable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'FOM_type' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <depreciate>
            15
            <!--years-->
          </depreciate>
          <reference_price>
            <fixed_value>70752705</fixed_value>
          </reference_price>
          <reference_driver>
            <!--kg/s of Hydrogen-->
            <fixed_value>7.4</fixed_value>
          </reference_driver>
          <scaling_factor_x>
            <fixed_value>0.955</fixed_value>
          </scaling_factor_x>
          <driver>
            <!--Warning: The value of 'FOM_variable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
            <variable>source_capacity</variable>
          </driver>
        </CashFlow>
        <CashFlow inflation="none" mult_target="FALSE" name="VOM" taxable="TRUE" type="repeating">
          <!--Warning: The value of 'VOM_inflation' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_multi_target' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_name' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_taxable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_type' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <depreciate>
            15
            <!--years-->
          </depreciate>
          <reference_price>
            <!-- Just a placeholder to make sure it passes through-->
            <fixed_value>100</fixed_value>
          </reference_price>
          <reference_driver>
            <!--kg/s of Hydrogen-->
            <fixed_value>7.4</fixed_value>
          </reference_driver>
          <driver>
            <activity>a</activity>
          </driver>
        </CashFlow>
      </economics>
    </Component>
    <Component name="sink">
      <demands dispatch="independent" resource="a">
        <capacity>
          <fixed_value>-2</fixed_value>
        </capacity>
      </demands>
      <economics>
        <!--This 'economics' subnode is created using information from the HYBRID simulations-->
        <lifetime>
          30
          <!--years-->
        </lifetime>
        <CashFlow inflation="none" mult_target="FALSE" name="VOM" taxable="TRUE" type="repeating">
          <!--Warning: The value of 'VOM_inflation' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_multi_target' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_name' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_taxable' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <!--Warning: The value of 'VOM_type' is not provided by HYBRID. A default value is assigned instead. It needs to be reviewed or replaced-->
          <reference_price>
            <!-- Just a placeholder to make sure it passes through-->
            <fixed_value>0</fixed_value>
          </reference_price>
          <driver>
            <activity>a</activity>
          </driver>
        </CashFlow>
      </economics>
    </Component>
  </Components>

  <DataGenerators>
    <ARMA name="flex" variable="Signal">%HERON%/tests/integration_tests/ARMA/Sine30yr/arma_30yr.pk</ARMA>
    <Function name="functions">functions.py</Function>
  </DataGenerators>

</HERON>

